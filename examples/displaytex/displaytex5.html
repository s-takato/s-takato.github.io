<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    
    <title>displaytex5.cdy</title>
    <style type="text/css">
        * {
            margin: 0px;
            padding: 0px;
        }

        #CSConsole {
            background-color: #FAFAFA;
            border-top: 1px solid #333333;
            bottom: 0px;
            height: 200px;
            overflow-y: scroll;
            position: fixed;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://cindyjs.org/dist/v0.8/CindyJS.css">
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/Cindy.js"></script>
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/KetCindyPlugin.js"></script>
<script id="csinit" type="text/x-cindyscript">
use("KetCindyPlugin");
Dircdy=loaddirectory;
setdirectory(gethome());
import("ketcindy.ini");

funflg=0;
rowno=0;
varset=0;
varctr=0;
texflg=0;
str1="";str2="";str3="";str4="";
stredit=[str1,str2,str3,str4];
vstr1="aa=";
vstr2="bb=";
vstr3="yy=";
vstr4="xx=";
varedit=[vstr1,vstr2,vstr3,vstr4];
;
</script>
<script id="cskeytyped" type="text/x-cindyscript">
if(key()=="?" % keydownlist()==[32],
  if(!isreal(NumTyped),NumTyped=0);
  if(NumTyped==0,
    DispStr=
     "Figure(1) Parent(2) Parapara(3) Movie(4) Surf(5)";
  );
  if(NumTyped==1,
    DispStr=
     "Shift+ Title(T) Para(P) Slide(S) Digest(D)";
  );
  if(NumTyped==2,
    DispStr="Shift+ Meshlab(M)";
  );
  if(NumTyped==3,
    DispStr=
     "Ch : disp(0) chg(9) N(+,-) add(<) rmv(>)";
  );
  drawtext(mouse().xy,DispStr,size->24);
  NumTyped=mod(NumTyped+1,4);
,
  NumTyped=0;  
);
if(key()=="1",//Mkfigure
  Viewtex();
  kc();
);
if(key()=="2",//Mkparent
  Viewparent();
);
if(key()=="3",//Flipbook(Parapara)
  Flipbook();
);
if(key()=="4",//Texmovie
  Texmovie();
  kc();
);
if(key()=="5",//Surface
  Cheader();
  Cmain();
  kcC();
  if(ChNum>0,
    Ch=[ChNum];
  ,
    Ch=[1];
  );
  ChNum=0;
);
if(key()=="T",//Title
  Maketitle();
);
if(key()=="P",//ParaF
  Parafolder();
);
if(key()=="S",//Slide 
  Mkslides();
);
if(key()=="D",//Digest(Summary)
  Mkslidesummary();
);
if(key()=="M",//Meshlab
  Mkviewobj(OCNAME,OBJCMD,OCOPTION);
);

if(key()=="0",
  Dispchoice();
);
if(key()=="9",
  if(length(Ch)==0,
    Ch=[ChNum];
  ,
    if(!contains(Ch,ChNum),
      Ch=append(Ch,ChNum);
      ChNum=Ch_(length(Ch)-1);
      Ch=remove(Ch,[ChNum]);
      Ch=sort(Ch);
    );
  );
  Dispchoice();
);
if(key()=="+",
  ChNum=ChNum+1;
  Dispchoice();
);
if(key()=="-",
  ChNum=ChNum-1;
  Dispchoice();
);
if(key()=="<",
  if(length(select(Ch,#==ChNum))==0,
    Ch=append(Ch,ChNum);
    Ch=sort(Ch);
    ChNum=ChNum+1;
  );
  Dispchoice();
);
if(key()=="^",
  if(length(Ch)==0,
    Ch=[ChNum];
  ,
    if(!contains(Ch,ChNum),
      Ch=Ch_(1..(length(Ch)-1));
      Ch=append(Ch,ChNum);
      Ch=sort(Ch);
    );
  );
  ChNum=ChNum+1;
  Dispchoice();
);
if(key()=="~",
  if(length(Ch)==0,
    Ch=[ChNum];
  ,
    if(!contains(Ch,ChNum),
      Ch=Ch_(1..(length(Ch)-1));
      Ch=append(Ch,ChNum);
      Ch=sort(Ch);
    );
  );
  ChNum=max(ChNum-1,1);
  Dispchoice();
);
if(key()==">",
  if(length(Ch)>0,
    ChNum=Ch_(length(Ch));
    Ch=Remove(Ch,[ChNum]);
  );
  Dispchoice();
);
;
</script>
<script id="csdraw" type="text/x-cindyscript">
Ketinit("");
Setketcindyjs(["Nolabel=all"]);//no ketjs on

td(str):=td(1,str);
td(col,str):=(
 regional(out);
 out="<td align="+Dqq("center");
 if(col>1,
  out=out+" colspan="+Dqq(text(col));
 );
 out=out+">"+str+"</td>";
 out;
);
eL=[
 "$\pi$","$\frac{b}{a}$","$a^x$","$\sqrt{a}$",
 "$\sqrt[b]{a}$","$\log_a\!\!x$","$\sin x$","$\sin^2 x$",
 "$\alpha$","$\beta$","$\theta$","$\cdot$","$\times$",
 "space","$\leq$","$\geq$","$\Leftrightarrow$",
 "$\displaystyle\lim_{x \to a}f(x)$","$\int f(x)dx$",
 "$\int_a^b f(x)dx$"
];
kL=[
 "pi","fr(b,a)","a^x","sq(a)",
 "sq(b,a)","log(a,x)","sin(x)","sin(2,x)",
 "Ga","Gb","Gt","dot","crs",
 "sp","(=","=)","(==)",
 "lim(x,a,f(x))","int(f(x),dx)",
 "int(a,b,f(x),dx)","[x^2]_a^b"
];
width=[1,2,2,2, 2,2,2,2, 1,1,1,1,1, 2,1,1,2];
//width=concat(width,[2]);
//width=concat(width,[1,1,1,1,1]);
width=concat(width,[4,4,4]);
eor1=1..17;
//eor2=19..23;
eor3=18..20;
est1=""; kst1="";
est2=""; kst2="";
est3=""; kst3="";
forall(eor1,
 est1=est1+td(width_#,eL_#);
 kst1=kst1+td(width_#,kL_#);
);
//est1=est1+"<td rowspan="+Dqq("2")+" align="+Dqq("center")+">代用</td>";
forall(eor2,
 est2=est2+td(width_#,eL_#);
 kst2=kst2+td(width_#,kL_#);
);
forall(eor3,
 est3=est3+td(width_#,eL_#);
 kst3=kst3+td(width_#,kL_#);
);
Ketcindyjsmain([
 "<pf4/fp>数式はASCII文字（半角文字）のみ．改行は //．　$+$は&，$=$は$::$，^は hat で代用してよい",
 "<table class="+Dqq("wide")+" border="+Dqq("1")+" width="+Dqq("300")+">",
 " <tr>"+est1+est2+est3,
 " </tr>",
 " <tr height="+Dqq("30")+">"+kst1+kst2+kst3+"</tr>",
// "</table>",
// "</br>",
// "<table class="+Dqq("narrow")+" border="+Dqq("1")+" width="+Dqq("300")+">",
// " <tr height="+Dqq("30")+">"+kst3+"</tr>",
 "</table>"
 ]);
// no ketjs off

RepL1=[
 ["hat","^"],["crs","\times"],["cross","\times"],
 ["&","+"],["--","+"],["::","="]
];
RepL2=[
 [" ^","^"],["(.","<"],[".)",">"],["(=","<="],["=)","=>"]
];
RepL3=[
 ["^ ","^"],["<==>"," \Leftrightarrow "],
 ["==>"," \Rightarrow "],["<=="," \Leftarrow "],
 ["<="," \leq "],["=>"," \geq "],[">="," \geq "]
];

Addfun(name):=(
  regional(out,tmp);
  out="";
  if(name=="frac",out="fr(aa,bb)");
  if(name=="power",out="(aa)^(bb)");
  if(name=="sqrt",out="sq(aa,bb)");
  if(name=="sin",out="sin(aa,(xx))");
  if(name=="cos",out="cos(aa,(xx))");
  if(name=="tan",out="tan(aa,(xx))");
  if(name=="log",out="log(aa,(xx))");
  if(name=="hat",out="^");
  if(name=="under",out="_(aa)");
  if(name=="plus",out="+");
  if(name=="minus",out="-");
  if(name=="lpar",out="(");
  if(name=="rpar",out=")");
  if(name=="comma",out=",");
  if(name=="greek",out="G");
  if(name=="equal",out="=");
  if(name=="less",out="<");
  if(name=="great",out=">");
  if(name=="prime",out="'");
  if(name=="pi",out="pi");
  if(name=="dot",out=".");
  if(name=="ast",out="*");
  if(name=="n0",out="0");
  if(name=="n1",out="1");
  if(name=="n2",out="2");
  if(name=="n3",out="3");
  if(name=="n4",out="4");
  if(name=="n5",out="5");
  if(name=="n6",out="6");
  if(name=="n7",out="7");
  if(name=="n8",out="8");
  if(name=="n9",out="9");
  if(name=="La",out="a");
  if(name=="Lb",out="b");
  if(name=="Lc",out="c");
  if(name=="Lx",out="x");
  if(name=="Ly",out="y");
  if(name=="Lz",out="z");
  if(name=="lim",out="lim(xx,aa,(yy))");
  if(name=="int",out="int(aa,bb,(yy),dxx)");
  out;
);

Noascii(str):=(
  regional(ascii,out,tmp,tmp1);
  ascii=apply(32..126,unicode(text(#),base->10));
  out="";
  forall(1..(length(str)),
    tmp=Op(#,str);
    if(!contains(ascii,tmp),
      out=out+tmp;
    );
  );
  out;
);

Sla2fra(str):=(
  regional(alpha,numer,sep,s,flg,out,parL,parflg,nn,nu,de,finish,
      tmp,tmp1,tmp2);
  tmp1=32..126;
  tmp=(65..90)++(97..122);
  tmp1=remove(tmp1,tmp);
  alpha=apply(tmp,unicode(text(#),base->10));
  tmp=[46]++(48..57);
  tmp1=remove(tmp1,tmp);
  numer=apply(tmp,unicode(text(#),base->10));
  sep=apply(tmp1,unicode(text(#),base->10));
  out="";
  stL=Strsplit(str,"/");
  forall(1..(length(stL)-1),nn,
    finish=0;
    s=stL_(nn);
    parL=Bracket(s,"()");
    parflg=0;
    tmp=Op(length(s),s);
    if(tmp==")",
      tmp=select(parL,#_1==length(s));
      tmp=tmp_1_2;
      tmp=select(parL,#_2==-tmp);
      tmp=tmp_(-1)_1;
      nu=substring(s,tmp-1,length(s));
      tmp1=substring(s,0,tmp-1);
      tmp2=tmp-1;
      while(tmp2>0,
        tmp=Op(tmp2,s);
        if(contains(alpha,tmp),
          nu=tmp+nu;
          tmp1=substring(s,0,tmp2-1);
          tmp2=tmp2-1;
        ,
          tmp1=substring(s,0,tmp2);
          tmp2=0;
        );
      );
      finish=1;
    );  
    if(finish==0,
      nu=tmp;
      tmp2=length(s)-1;
      tmp1=substring(s,0,tmp2);
      if(contains(numer,tmp),
        while(tmp2>0,
          tmp=Op(tmp2,s);
          if(contains(numer,tmp),
            nu=tmp+nu;
            tmp1=substring(s,0,tmp2-1);
            tmp2=tmp2-1;
          ,
            if((tmp=="-")&(tmp2>1),
              if(Op(tmp2-1,s)=="(",
                nu=tmp+nu;
                stL_(nn+1)="("+stL_(nn+1);
                tmp1=substring(s,1,tmp2-1);
              ,
                tmp1=substring(s,0,tmp2-1);
              );
            ,
              if(tmp=="(",
                tmp1=substring(s,0,tmp2);
              ,
                tmp1=substring(s,0,tmp2-1);
              );
            );
            tmp2=0;
          );
        );
        finish=1;
      );
    );
    if(finish==0,
      if(contains(alpha,tmp),
        nu=tmp;
        while(tmp2>0,
          tmp=Op(tmp2,s);
          if(contains(alpha,tmp),
            nu=tmp+nu;
            tmp1=substring(s,0,tmp2-1);
            tmp2=tmp2-1;
          ,
            tmp1=substring(s,0,tmp2);
            tmp2=0;
          );
        );
        finish=1;
      );
    );
    if(substring(nu,0,1)=="(",nu=substring(nu,1,length(nu)-1));
    out=out+tmp1+"fr("+nu+",";
    finish=0;
    s=stL_(nn+1);
    parL=Bracket(s,"()");
    tmp=Op(1,s);
    if(tmp=="(",
      tmp=select(parL,#_2==-1);
      tmp=tmp_1_1;
      de=substring(s,1,tmp-1);
      tmp1=substring(s,tmp,length(s));
      finish=1;
    );
    if(finish==0,
      de=tmp;
      tmp1="";
      tmp2=2;
      if(contains(numer,tmp),
        while(tmp2<=length(s),
          tmp=Op(tmp2,s);
          if(contains(numer,tmp),
            de=de+tmp;
            tmp1=substring(s,tmp2,length(s));
            tmp2=tmp2+1;
          ,
            tmp1=substring(s,tmp2-1,length(s));
            tmp2=length(s)+1;
          );
        );
        finist=1;
      );
    );
    if(finish==0,
      if(contains(alpha,tmp),
        while(tmp2<=length(s),
          tmp=Op(tmp2,s);
          if(contains(alpha,tmp),
            de=de+tmp;
            tmp1=substring(s,tmp2,length(s));
            tmp2=tmp2+1;
          ,
            if(tmp!="(",
              tmp1=substring(s,tmp2-1,length(s));
            ,              
              tmp=select(parL,#_1==tmp2);
              tmp=tmp_1_2;
              tmp=select(parL,(#_1>tmp2)&(#_2==-tmp));
              tmp=tmp_1_1;
              de=de+substring(s,tmp2-1,tmp);
              tmp1=substring(s,tmp,length(s));
            );
            tmp2=length(s)+1;
          );
        );
        finist=1;
      );
    );
    out=out+de+")";
    stL_(nn+1)=tmp1;
  );
  out=out+stL_(-1);
  out;
);

Addat(str):=(
  regional(ascii,out,flg,tmp);
  ascii=apply(32..126,unicode(text(#),base->10));
  ascii=remove(ascii,["@"]);
  out="";
  flg=0;
  forall(1..(length(str)),
    tmp=str_#;
    if(tmp=="@",
      flg=1-flg
    ,
      if(!contains(ascii,tmp),
        if(flg==0,
          tmp="@"+tmp+"@";
        );
      );
    );
    out=out+tmp;
  );
  out=replace(out,"@@","");
  out;
);

Sepchar(strorg):=(
  regional(str,out,flg,err,tmp,tmp1,tmp2);
  str=Addat(strorg);
  err="";
  out=[];
  tmp1=Indexall(str,"@");
  tmp=length(tmp1);
  if((length(str)==0)%(tmp==0)%(mod(tmp,2)==1),
    if((length(str)==0)%(tmp==0),
      if(length(str)==0,out=[],out=[str]);
    ,
      err="@の数";
    );
  ,
    tmp=tmp1_1;
    if(tmp>1,
      out=[substring(str,0,tmp-1)];
    );
    start=tmp;
    flg=1;
    forall(2..(length(tmp1)),
      if(flg==1,
        tmp2=substring(str,start-1,tmp1_#-1);
      ,
        tmp2=substring(str,start,tmp1_#-1);
      );
      out=append(out,tmp2);
      start=tmp1_#;
      flg=1-flg;
    );
    if(start<length(str),
      tmp2=substring(str,start,length(str));
      out=append(out,tmp2);
    );
  );
  [out,err];
);

Moretotex(str):=(
  regional(repL,parL,symL,sym,np,subL,nn,out,
     head,tmp,tmp1,tmp2,tmp3);
  out=str;
  symL=[
    ["_(xx)","_{xx}"],
    ["int(xx,yy)","\int xx\,yy"],
    ["int(xx,yy,zz,ww)","\int_{xx}^{yy} zz\,ww"],
    ["lim(xx,yy,zz)","\displaystyle\lim_{{xx} \to {yy}}{zz}"]
  ];
  repL=["xx","yy","zz","ww"];
  forall(symL,sym,
    tmp=indexof(sym_1,"(");
    head=substring(sym_1,0,tmp);
    np=length(Indexall(sym_1,","))+1;
    subL=tokenize(out,head);
    subL=apply(subL,if(isstring(#),#,text(#)));
    forall(2..(length(subL)),nn,
      tmp1=head+subL_nn;
      parL=Bracket(tmp1,"()");
      tmp=select(parL,#_2==-1);
      tmp=tmp_1_1;
      subL_nn=substring(tmp1,tmp,length(tmp1));
      tmp1=substring(tmp1,0,tmp);
      tmp=replace(tmp1,head,"");
      tmp=substring(tmp,0,length(tmp)-1);
      tmp2=Strsplit(tmp,",");
      if(length(tmp2)==np,
        tmp1=sym_2;
        if(head=="int(",
          tmp=tmp2_(-1);
          if(substring(tmp,0,1)!="d",tmp="d"+tmp);
          tmp2_(-1)=tmp;
        );
        forall(1..np,
          tmp1=replace(tmp1,repL_#,tmp2_#);
        );
      );
      subL_nn=tmp1+subL_nn;
    );
    out="";
    forall(subL,out=out+#);
  );
  tmp=[["dot","\cdot "],["sp ","\; "]];
  out=replace(out,tmp);
  
  tmp=[["Ga","\alpha"],["Gb","\beta"],["Gt","\theta"]];
  out=replace(out,tmp);
  out;
);

Backspace():=(
  regional(tmp,tmp1,tmp2);
  if(varctr==0,
    if(rowno==1,
      tmp=Text50.currenttext;
      tmp=substring(tmp,0,length(tmp)-1);
      Text50.currenttext=tmp;
    );
    if(rowno==2,
      tmp=Text51.currenttext;
      tmp=substring(tmp,0,length(tmp)-1);
      Text51.currenttext=tmp;
    );
    if(rowno==3,
      tmp=Text52.currenttext;
      tmp=substring(tmp,0,length(tmp)-1);
      Text52.currenttext=tmp;
    );
    if(rowno==4,
      tmp=Text53.currenttext;
      tmp=substring(tmp,0,length(tmp)-1);
      Text53.currenttext=tmp;
    );
  ,
    if(varctr==1,
      tmp=Text56.currenttext;
      tmp=substring(tmp,0,length(tmp)-1);
      Text56.currenttext=tmp;
    );
    if(varctr==2,
      tmp=Text57.currenttext;
      tmp=substring(tmp,0,length(tmp)-1);
      Text57.currenttext=tmp;
    );
    if(varctr==3,
      tmp=Text58.currenttext;
      tmp=substring(tmp,0,length(tmp)-1);
      Text58.currenttext=tmp;
    );
    if(varctr==4,
      tmp=Text59.currenttext;
      tmp=substring(tmp,0,length(tmp)-1);
      Text59.currenttext=tmp;
    );
  );
);

Resetvar():=(
  vstr1="aa=";
  vstr2="bb=";
  vstr3="yy=";
  vstr4="xx=";
  varedit=[vstr1,vstr2,vstr3,vst4];
  Text56.currenttext=vstr1;
  Text57.currenttext=vstr2;
  Text58.currenttext=vstr3;
  Text59.currenttext=vstr4;
);

pos=1.2;
pos2=1.2;
dposy=3.7;
win=50..53;
var=56..59;
Setwindow([-3,20.2],[-11.5,6]);
Addax(0);

//Framedata2("1",[[0,3.4],[8,3.7]],["Msg=n"]);
//str="int(x,0,1,dx)=[1/2 x^2]_0^1=1/2";

str1=""; //no ketjs on
str2="";
str3="";
str4=""; //no ketjs off
//if(funflg==0, // only ketjs on
//  str1=Textedit(win_1);
//  str2=Textedit(win_2);
//  str3=Textedit(win_3);
//  str4=Textedit(win_4);
//); // only ketjs off
stredit=[str1,str2,str3,str4];
add="";
if(funflg==1,
  add=Addfun(name);
  funflg=2;
);
mrkx=0.4;
ops=["Size=10","Color=red","Msg=n"];
if(rowno==0,rowno=1);
if((varctr==0)&(rowno==1),
  str1=Text50.currenttext+add;
  Text50.currenttext=str1;
  Pointdata("1",[mrkx,3],ops);
);
if((varctr==0)&(rowno==2),
  str2=Text51.currenttext+add;
  Text51.currenttext=str2;
  Pointdata("1",[mrkx,-0.5],ops);
);
if((varctr==0)&(rowno==3),
  str3=Text52.currenttext+add;
  Text52.currenttext=str3;
  Pointdata("1",[mrkx,-4.2],ops);
);
if((varctr==0)&(rowno==4),
  str4=Text53.currenttext+add;
  Text53.currenttext=str4;
  Pointdata("1",[mrkx,-7.9],ops);
);
//vstr1=Textedit(var_1); //only ketjs on
//vstr2=Textedit(var_2);
//vstr3=Textedit(var_3);
//vstr4=Textedit(var_4); //only ketjs off
varname=["aa","bb","yy","xx"];
mrkx=-5.3;
ops=["Size=10","Color=blue","Msg=n"];
if(varctr>0,add=Addfun(name));
if(varctr==1,
  Pointdata("1",[mrkx,3],ops);
  vstr1=vstr1+Addfun(name);
  Text56.currenttext=vstr1;
  name="";
);
if(varctr==2,
  tmp=vstr2;
  vstr2=tmp+Addfun(name);
  Text57.currenttext=vstr2;
  Pointdata("1",[mrkx,2.2],ops);
  name="";
);
if(varctr==3,
  tmp=Text58.currenttext;
  vst3=tmp+Addfun(name);
  Text58.currenttext=vstr3;
  Pointdata("1",[mrkx,1.4],ops);
  name="";
);
if(varctr==4,
  tmp=Text59.currenttext;
  vstr4=tmp+Addfun(name);
  Text59.currenttext=vstr4;
  name="";
  Pointdata("1",[mrkx,0.5],ops);
);
varedit=[vstr1,vstr2,vstr3,vstr4];
if(varset==1,
  forall(1..(length(varname)),
    tmp=Strsplit(varedit_#,"=");
    tmp1=tmp_1;
    tmp2=tmp_2;
    if(length(tmp2)>0,
      if(rowno==1,str1=replace(str1,tmp1,tmp2));
      if(rowno==2,str2=replace(str2,tmp1,tmp2));
      if(rowno==3,str3=replace(str3,tmp1,tmp2));
      if(rowno==4,str4=replace(str4,tmp1,tmp2));
  );
  str1=replace(str1,[["(aa,bb,","("],["(aa,","("]]);
  str2=replace(str2,[["(aa,bb,","("],["(aa,","("]]);
  str3=replace(str3,[["(aa,bb,","("],["(aa,","("]]);
  str4=replace(str4,[["(aa,bb,","("],["(aa,","("]]);
  varset=0;
);
  if(rowno==1,Text50.currenttext=str1);
  if(rowno==2,Text51.currenttext=str2);
  if(rowno==3,Text52.currenttext=str3);
  if(rowno==4,Text53.currenttext=str4);
);
stredit=[str1,str2,str3,str4];
texstr="";
if(texflg==0,nall=4,nall=3);
forall(1..nall,nn,
  str=stredit_nn;
  strL=tokenize(str,"//");
  forall(1..(length(strL)),
    if(!isstring(strL_#),strL_#=text(strL_#));
    strL_#=Removespace(strL_#);
  );
  forall(strL,str,
    err="";
    tmp=Sepchar(str);
    subL=tmp_1;
    err=tmp_2;
    str1="";
    forall(subL,
      if(substring(#,0,1)=="@",
        str1=str1+substring(#,1,length(#));
      ,
        tmp2=#;
        err=Noascii(tmp2);
        if(length(err)>0,err="ASCII以外"+err);
        tmp2=Sla2fra(tmp2);
        str2=replace(tmp2,RepL1);
        str2=replace(str2,RepL2);
        str2=replace(str2,RepL3);
        tstr=Totexform(str2);
        tstr=Moretotex(tstr);
        str1=str1+"$"+tstr+"$";
        if(indexof(tstr,"?")>0,
          if(indexof(tstr,"?)-")>0,
            err=") 多い";
          );
          if(indexof(tstr,"?+)")>0,
            err=") 少ない";
          );
        );
      );
      tmp=pos-dpos*(nn-1);
      if(length(err)==0,
        Letter([0.5,pos],"e",str1,["Size=2"]);
        if(length(str1)>0,
          if(nn==1,texstr=str1,texstr=texstr+"\\"+str1);
        );
      ,
        Letter([0.5,pos],"e",str,["Size=1.8"]);
        Letter([20,pos],"e",err,["Color=red","Size=1.8"]);
      );
    );
    pos=pos-dposy;
  );
);
if(funflg==2,
//  Resetvar();
  funflg=0;
);
if(texflg==1,
  Text53.currenttext=texstr;
);
if(texflg==2,
  Text53.currenttext="";
  texflg=0;
);

Windispg();
;
</script>
    <script type="text/javascript">
var cdy = CindyJS({
  scripts: "cs*",
  defaultAppearance: {
    dimDependent: 0.7,
    fontFamily: "sans-serif",
    lineSize: 1,
    pointSize: 5.0,
    textsize: 12.0
  },
  angleUnit: "°",
  geometry: [
    {name: "SW", type: "Free", pos: [-1.0434782608695652, -4.0, 0.34782608695652173], color: [1.0, 0.0, 0.0], labeled: true},
    {name: "NE", type: "Free", pos: [4.0, 1.188118811881188, 0.19801980198019803], color: [1.0, 0.0, 0.0], labeled: true},
    {name: "Text53", type: "EditableText", pos: [0.4357976653696498, -4.0, 0.4887727897002369], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 1.0, minwidth: 600, textsize: 20.0},
    {name: "Text50", type: "EditableText", pos: [-1.344633148491218, -4.0, -1.4098105289042269], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 1.0, minwidth: 600, textsize: 20.0},
    {name: "Text51", type: "EditableText", pos: [3.566464210390463, -3.311716766791144, 4.0], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 1.0, minwidth: 600, textsize: 20.0},
    {name: "Text52", type: "EditableText", pos: [0.7659574468085107, -4.0, 0.8908837372550418], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 1.0, minwidth: 600, textsize: 20.0},
    {name: "Text59", type: "EditableText", pos: [4.0, -0.24776953155662274, -0.8405193537308085], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 1.0, minwidth: 110, text: "xx=", textsize: 16.0},
    {name: "Text56", type: "EditableText", pos: [4.0, -2.342936493386471, -0.8350118757121706], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 1.0, minwidth: 110, text: "aa=", textsize: 16.0},
    {name: "Text57", type: "EditableText", pos: [4.0, -1.6988209469235283, -0.8405193537308085], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 1.0, minwidth: 110, text: "bb=", textsize: 16.0},
    {name: "Text58", type: "EditableText", pos: [4.0, -0.9800226915901221, -0.8350118757121706], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 1.0, minwidth: 110, text: "yy=", textsize: 16.0},
    {name: "Text1", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.286, 0.286], fillalpha: 0.27272728085517883, script: "Viewtex();\nkc();", text: "Figure", textsize: 18.0, dock: {corner: "UL", offset: [10.0, -20.0]}},
    {name: "Text21", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 1.0], fillalpha: 0.5726495726495726, script: "Mkketcindyjs(append(KETJSOP,\"Web=y\"));", text: "Ketjson", textsize: 18.0, dock: {corner: "UL", offset: [76.0, -20.0]}},
    {name: "Text22", type: "Button", color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 1.0], fillalpha: 0.4358974358974359, script: "Mkketcindyjs(append(KETJSOP,\"Web=n\"));", text: "Ketjsoff", textsize: 18.0, dock: {corner: "UL", offset: [154.0, -20.0]}},
    {name: "Text61", type: "Button", pos: [2.467793165962263, -4.0, -0.9077102995707615], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"frac\";\n", text: "frac", textsize: 18.0},
    {name: "Text63", type: "Button", pos: [-0.12495926041427653, -4.0, -0.9077102995707615], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"sqrt\";", text: "sqrt", textsize: 18.0},
    {name: "Text62", type: "Button", pos: [1.157171060321375, -4.0, -0.9077102995707615], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"power\";\n", text: "a^b", textsize: 18.0},
    {name: "Text64", type: "Button", pos: [-1.4640731509604015, -4.0, -0.9077102995707615], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"sin\";\n", text: "sin", textsize: 18.0},
    {name: "Text65", type: "Button", pos: [-2.546760977359396, -4.0, -0.9077102995707615], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"cos\";\n", text: "cos", textsize: 18.0},
    {name: "Text66", type: "Button", pos: [-3.714924158474101, -4.0, -0.9077102995707615], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"tan\";", text: "tan", textsize: 18.0},
    {name: "Text71", type: "Button", pos: [4.0, 2.069765296130488, 0.4730563743645543], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"plus\";\n", text: "＋", textsize: 18.0},
    {name: "Text114", type: "Button", pos: [-1.3541666666666665, -4.0, 0.6668750002061207], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"equal\";\n", text: "＝", textsize: 18.0},
    {name: "Text69", type: "Button", pos: [4.0, 1.670455945827125, 0.3845507858899835], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"hat\";\n", text: "^", textsize: 18.0},
    {name: "Text112", type: "Button", pos: [4.0, 1.5487465181058495, 0.35665738172583616], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"less\";\n", text: "＜", textsize: 18.0},
    {name: "Text113", type: "Button", pos: [4.0, 1.4249363867684477, 0.32580152681825747], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"great\";\n", text: "＞", textsize: 18.0},
    {name: "Text70", type: "Button", pos: [4.0, 2.300321966838971, 0.52575138424554], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"under\";\n", text: "_.", textsize: 18.0},
    {name: "Text67", type: "Button", pos: [4.0, 3.276615568655245, 0.7435544248505684], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"log\";\n", text: "log", textsize: 18.0},
    {name: "Text76", type: "Button", pos: [4.0, 1.1486761710794298, 0.26077393083416534], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"prime\";\n", text: "'", textsize: 18.0},
    {name: "Text68", type: "Button", pos: [4.0, 2.625247922892501, 0.6000150193518892], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"pi\";\n", text: "pi", textsize: 18.0},
    {name: "Text78", type: "Button", pos: [4.0, 1.0965250965250966, 0.2471814672578671], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"lim\";\n\n", text: "lim", textsize: 18.0},
    {name: "Text86", type: "Button", pos: [-0.4375, -4.0, 0.49068205841000345], color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 1.0], fillalpha: 0.5042735042735043, script: "rowno=4;\nvarctr=0;\nResetvar();", text: "SL", textsize: 18.0},
    {name: "Text99", type: "Button", pos: [4.0, 0.9149628686986261, 0.20911985438829975], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.0, 0.0], fillalpha: 0.5042735042735043, script: "Backspace();\n", text: "BS", textsize: 18.0},
    {name: "Text83", type: "Button", pos: [-1.6774193548387095, -4.0, 2.026042047628401], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.0, 0.0], fillalpha: 0.5042735042735043, script: "funflg=0;\nfunflg=0;\nText51.currenttext=\"\";\nResetvar();\n", text: "AC", textsize: 18.0},
    {name: "Text85", type: "Button", pos: [-0.64804469273743, -4.0, 0.7017575807427983], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.0, 0.0], fillalpha: 0.5042735042735043, script: "funflg=0;\nText52.currenttext=\"\";\nResetvar();\n", text: "AC", textsize: 18.0},
    {name: "Text81", type: "Button", pos: [2.5, -4.0, -2.6169709781866852], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.0, 0.0], fillalpha: 0.5042735042735043, script: "funflg=0;\nText50.currenttext=\"\";\nResetvar();\n", text: "AC", textsize: 18.0},
    {name: "Text88", type: "Button", pos: [4.0, 0.6354347053253703, -0.8574864945245058], color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 1.0], fillalpha: 0.5042735042735043, script: "if(varctr==0,name=\"\");\nvarctr=varctr+1;\nif(varctr==5,varctr=1);", text: "SL", textsize: 18.0},
    {name: "Text82", type: "Button", pos: [-3.4390904885908036, -3.184343044991485, 4.0], color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 1.0], fillalpha: 0.5042735042735043, script: "rowno=2;\nvarctr=0;\nResetvar();", text: "SL", textsize: 18.0},
    {name: "Text84", type: "Button", pos: [-0.7943262411347518, -4.0, 0.8908837372550418], color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 1.0], fillalpha: 0.5042735042735043, script: "rowno=3;\nvarctr=0;\nResetvar();", text: "SL", textsize: 18.0},
    {name: "Text87", type: "Button", pos: [-0.40816326530612246, -4.0, 0.4272605678672139], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.0, 0.0], fillalpha: 0.5042735042735043, script: "funflg=0;\nText53.currenttext=\"\";\nResetvar();", text: "AC", textsize: 18.0},
    {name: "Text80", type: "Button", pos: [1.2413793103448276, -4.0, -1.4438460569305849], color: [0.0, 0.0, 0.0], fillcolor: [0.0, 1.0, 1.0], fillalpha: 0.5042735042735043, script: "rowno=1;\nvarctr=0;\nResetvar();\n", text: "SL", textsize: 18.0},
    {name: "Text79", type: "Button", pos: [4.0, 1.0141843971631206, 0.22702127666591343], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"int\";\n\n", text: "int", textsize: 18.0},
    {name: "Text871", type: "ToggleButton", pos: [4.0, -1.4581280788177338, 0.21024630548370307], color: [0.0, 0.0, 0.0], fillcolor: [0.0, 0.0, 1.0], fillalpha: 0.5042735042735043, script: "texflg=texflg+1;", text: "TX", textsize: 18.0},
    {name: "Text72", type: "Button", pos: [4.0, 1.8561642395769213, 0.4242366644377443], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"minus\";\n", text: "ー", textsize: 18.0},
    {name: "Text73", type: "Button", pos: [-2.4869565217391307, -4.0, 0.5566956523459791], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"lpar\";\n", text: "（", textsize: 18.0},
    {name: "Text74", type: "Button", pos: [-1.7758620689655173, -4.0, 0.5518965518947205], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"rpar\";\n", text: "）", textsize: 18.0},
    {name: "Text75", type: "Button", pos: [-1.1158798283261802, -4.0, 0.5495278971655587], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"comma\";\n", text: "，", textsize: 18.0},
    {name: "Text89", type: "Button", pos: [4.0, 0.8460806986166746, -1.1417424422390778], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.686, 0.686], fillalpha: 0.5042735042735043, script: "varset=1;\nvarctr=0;", text: "Set", textsize: 18.0},
    {name: "Text77", type: "Button", pos: [4.0, 1.2147505422993492, 0.27774403479300475], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"greek\";\n", text: "G", textsize: 18.0},
    {name: "Text107", type: "Button", pos: [4.0, 1.917808219178082, -0.876986301640926], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n7\";\n", text: "７", textsize: 18.0},
    {name: "Text109", type: "Button", pos: [-3.826086956521739, -4.0, 1.8556521744865968], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n9\";\n", text: "９", textsize: 18.0},
    {name: "Text1078", type: "Button", pos: [4.0, 2.6285714285714286, -1.2194285718054778], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n8\";\n", text: "８", textsize: 18.0},
    {name: "Text104", type: "Button", pos: [4.0, 3.004093785862821, -0.8812044003036117], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n4\";\n", text: "４", textsize: 18.0},
    {name: "Text1075", type: "Button", pos: [-3.926605504587156, -4.0, 1.1746788994456439], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n5\";\n", text: "５", textsize: 18.0},
    {name: "Text106", type: "Button", pos: [-2.4, -4.0, 1.1640000003597744], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n6\";\n", text: "６", textsize: 18.0},
    {name: "Text101", type: "Button", pos: [-3.8666666666666663, -4.0, 0.8536000002638344], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n1\";\n", text: "１", textsize: 18.0},
    {name: "Text102", type: "Button", pos: [-2.8, -4.0, 0.8536000002638344], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n2\";\n", text: "２", textsize: 18.0},
    {name: "Text103", type: "Button", pos: [-1.748344370860927, -4.0, 0.847947020129637], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n3\";\n", text: "３", textsize: 18.0},
    {name: "Text111", type: "Button", pos: [4.0, 1.3145539906103283, 0.3005633803745896], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"ast\";\n", text: "＊", textsize: 18.0},
    {name: "Text110", type: "Button", pos: [-2.1570680628272254, -4.0, 0.6703664923537968], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"dot\";\n", text: "．", textsize: 18.0},
    {name: "Text100", type: "Button", pos: [-2.9375000000000004, -4.0, 0.6668750002061207], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"n0\";\n", text: "０", textsize: 18.0},
    {name: "Text115", type: "Button", pos: [-2.095238095238095, -4.0, 0.46901098915595296], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"La\";\n", text: "ａ", textsize: 18.0},
    {name: "Text116", type: "Button", pos: [-1.5238095238095235, -4.0, 0.46901098915595296], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"Lb\";\n", text: "ｂ", textsize: 18.0},
    {name: "Text117", type: "Button", pos: [-0.9745454545454545, -4.0, 0.46560000014390973], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"Lc\";\n", text: "ｃ", textsize: 18.0},
    {name: "Text120", type: "Button", pos: [-0.8454258675078865, -4.0, 0.40391167204913303], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"Lz\";\n", text: "ｚ", textsize: 18.0},
    {name: "Text1119", type: "Button", pos: [-1.3079365079365082, -4.0, 0.40647619060182594], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"Ly\";\n", text: "ｙ", textsize: 18.0},
    {name: "Text1118", type: "Button", pos: [-1.7848101265822784, -4.0, 0.4051898735429594], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 0.0], fillalpha: 1.0, script: "funflg=1;\nname=\"Lx\";\n", text: "ｘ", textsize: 18.0},
    {name: "Text90", type: "Button", pos: [4.0, 1.3763130682676918, -1.8572637886890857], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 0.0, 0.0], fillalpha: 0.5042735042735043, script: "varctr=0;\nResetvar();\n", text: "AC", textsize: 18.0}
  ],
  ports: [{
    id: "CSCanvas",
    width: 939,
    height: 565,
    transform: [{visibleRect: [-6.232427364521638, 5.98250546519245, 23.102155569241862, -11.66822867493149]}],
    grid: 1.0,
    background: "rgb(168,176,192)"
  }],
  csconsole: false,
  use: ["katex"],
  cinderella: {build: 1952, version: [3, 0, 1952]}
});
    </script>
</head>
<body>
    <div id="CSCanvas"></div>
</body>
</html>